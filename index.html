<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Manager ‚Äî Progress Tracker</title>
  <style>
    :root{ --bg1:#74ABE2; --bg2:#5563DE; --card:#ffffffcc; --muted:#6b7280; --accent:#10b981; }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial; margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg,var(--bg1),var(--bg2)); padding:28px;}
    .wrap{width:100%; max-width:900px; background:var(--card); border-radius:12px; padding:18px; box-shadow:0 10px 30px rgba(2,6,23,0.2)}
    header{display:flex; justify-content:space-between; align-items:center; gap:12px}
    header h1{margin:0;font-size:20px}
    .main{display:grid; grid-template-columns:1fr 320px; gap:16px; margin-top:14px}

    /* left */
    .panel{background:rgba(255,255,255,0.6); padding:12px; border-radius:8px}
    .add-row{display:flex; gap:8px}
    .add-row input{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.06)}
    .add-row button{padding:10px 12px;border-radius:8px;border:0;background:linear-gradient(90deg,#6ee7b7,#34d399);cursor:pointer}
    .task-list{margin-top:12px; max-height:420px; overflow:auto}
    .task{display:flex; align-items:center; gap:10px; padding:10px; border-radius:8px; background:rgba(255,255,255,0.9); border:1px solid rgba(0,0,0,0.03); margin-bottom:8px}
    .task .title{flex:1}
    .task .title .text{font-weight:600}
    .task.completed .text{ text-decoration:line-through; color: #6b7280 }
    .task small{display:block;color:var(--muted);font-size:12px}
    .actions button{background:transparent;border:0;cursor:pointer;padding:6px;border-radius:6px}
    .actions button:hover{background:rgba(0,0,0,0.03)}

    /* right */
    .stats-card{padding:12px;border-radius:8px;background:rgba(255,255,255,0.9)}
    .progress-ring{display:flex; align-items:center; gap:12px}
    svg{display:block}
    .bar{height:10px;background:rgba(0,0,0,0.06);border-radius:999px;overflow:hidden}
    .bar > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#60a5fa,#34d399)}
    .stats-grid{display:flex; gap:8px; margin-top:10px}
    .stat{flex:1;background:rgba(0,0,0,0.03);padding:8px;border-radius:8px;text-align:center}
    .stat .num{font-weight:700}

    footer{margin-top:12px;text-align:right;color:var(--muted);font-size:13px}

    @media (max-width:880px){.main{grid-template-columns:1fr} .right{order:2}}
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Task Manager">
    <header>
      <div>
        <h1>Task Manager</h1>
        <div style="color:var(--muted);font-size:13px">Add, edit, complete, delete ‚Äî progress saved locally</div>
      </div>
      <div style="font-size:13px;color:var(--muted)">Local storage key: <strong>tasks-v1</strong></div>
    </header>

    <div class="main">
      <section class="panel left">
        <div class="add-row">
          <input id="taskInput" placeholder="Add a new task (press Enter)" aria-label="New task">
          <button id="addBtn">Add</button>
        </div>

        <div style="display:flex;gap:8px;margin-top:10px">
          <button id="filterAll" class="filter active">All</button>
          <button id="filterActive" class="filter">Active</button>
          <button id="filterDone" class="filter">Completed</button>
          <button id="clearDone" style="margin-left:auto;background:transparent;border:0;color:var(--muted);cursor:pointer">Clear done</button>
        </div>

        <div class="task-list" id="taskList" tabindex="0" aria-live="polite"></div>
      </section>

      <aside class="stats-card right">
        <div class="progress-ring">
          <svg width="96" height="96" viewBox="0 0 36 36" aria-hidden="true">
            <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="rgba(0,0,0,0.06)" stroke-width="2"></path>
            <path id="progressPath" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke-width="2" stroke-linecap="round" stroke="url(#g)" stroke-dasharray="0 100"></path>
            <defs><linearGradient id="g"><stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#34d399"/></linearGradient></defs>
            <text id="progressText" x="18" y="20.6" text-anchor="middle" font-size="5" fill="#111">0%</text>
          </svg>
          <div>
            <div style="font-weight:700">Progress</div>
            <div style="font-size:13px;color:var(--muted)" id="progressSummary">0 of 0 tasks done</div>
          </div>
        </div>

        <div style="margin-top:12px">
          <div class="bar" aria-hidden="true"><i id="linearBar"></i></div>
        </div>

        <div class="stats-grid">
          <div class="stat"><div class="num" id="totalN">0</div><div style="font-size:12px;color:var(--muted)">Total</div></div>
          <div class="stat"><div class="num" id="activeN">0</div><div style="font-size:12px;color:var(--muted)">Active</div></div>
          <div class="stat"><div class="num" id="doneN">0</div><div style="font-size:12px;color:var(--muted)">Completed</div></div>
        </div>

        <div style="margin-top:10px;color:var(--muted);font-size:13px">Edit: click ‚úèÔ∏è ‚Äî Complete: ‚úî ‚Äî Delete: üóë</div>
      </aside>
    </div>

    <footer>Made with ‚ô• ‚Äî your data stays in this browser (localStorage).</footer>
  </div>

  <script>
    const STORAGE_KEY = 'tasks-v1';
    const taskInput = document.getElementById('taskInput');
    const addBtn = document.getElementById('addBtn');
    const taskList = document.getElementById('taskList');
    const progressText = document.getElementById('progressText');
    const progressPath = document.getElementById('progressPath');
    const linearBar = document.getElementById('linearBar');
    const progressSummary = document.getElementById('progressSummary');
    const totalN = document.getElementById('totalN');
    const activeN = document.getElementById('activeN');
    const doneN = document.getElementById('doneN');

    let tasks = [];
    let filter = 'all'; // all | active | done

    function uid(){ return Date.now().toString(36)+Math.random().toString(36).slice(2,8); }

    function load(){ try{ tasks = JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; }catch(e){ tasks = []; } }
    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks)); }

    function addTask(text){ if(!text || !text.trim()) return; tasks.unshift({id:uid(), text:text.trim(), done:false, createdAt:Date.now()}); save(); render(); }
    function updateTask(id, patch){ const i=tasks.findIndex(t=>t.id===id); if(i>-1){ tasks[i]= {...tasks[i], ...patch}; save(); render(); }}
    function removeTask(id){ tasks = tasks.filter(t=>t.id!==id); save(); render(); }
    function clearDone(){ if(!confirm('Remove all completed tasks?')) return; tasks = tasks.filter(t=>!t.done); save(); render(); }

    function setFilter(f){ filter=f; document.querySelectorAll('.filter').forEach(b=>b.classList.toggle('active', b.id==='filter'+(f==='all'?'All': f==='active'?'Active':'Done'))); render(); }

    function render(){
      // visible list
      let visible = tasks.slice();
      if(filter==='active') visible = visible.filter(t=>!t.done);
      if(filter==='done') visible = visible.filter(t=>t.done);

      taskList.innerHTML='';
      if(visible.length===0){ const el=document.createElement('div'); el.style.color='var(--muted)'; el.textContent='No tasks ‚Äî add one above.'; taskList.appendChild(el); }

      visible.forEach(t=>{
        const item = document.createElement('div');
        item.className = 'task' + (t.done ? ' completed' : '');
        item.dataset.id = t.id;

        const chk = document.createElement('input'); chk.type='checkbox'; chk.checked = t.done; chk.title='Toggle complete'; chk.addEventListener('change', ()=> updateTask(t.id, {done:chk.checked}));

        const title = document.createElement('div'); title.className='title';
        const txt = document.createElement('div'); txt.className='text'; txt.textContent = t.text; txt.title='Double-click to edit';
        const meta = document.createElement('small'); meta.textContent = new Date(t.createdAt).toLocaleString();
        title.appendChild(txt); title.appendChild(meta);
        txt.addEventListener('dblclick', ()=> startEdit(t.id));

        const actions = document.createElement('div'); actions.className='actions';
        const editBtn = document.createElement('button'); editBtn.innerHTML='‚úèÔ∏è'; editBtn.title='Edit'; editBtn.addEventListener('click', ()=> startEdit(t.id));
        const delBtn = document.createElement('button'); delBtn.innerHTML='üóë'; delBtn.title='Delete'; delBtn.addEventListener('click', ()=>{ if(confirm('Delete this task?')) removeTask(t.id); });
        actions.appendChild(editBtn); actions.appendChild(delBtn);

        item.appendChild(chk); item.appendChild(title); item.appendChild(actions);
        taskList.appendChild(item);
      });

      updateStats();
    }

    function updateStats(){
      const total = tasks.length;
      const done = tasks.filter(t=>t.done).length;
      const active = total - done;
      const pct = total===0?0:Math.round((done/total)*100);

      totalN.textContent = total; activeN.textContent = active; doneN.textContent = done;
      progressText.textContent = pct + '%';
      progressPath.setAttribute('stroke-dasharray', pct + ' 100');
      linearBar.style.width = pct + '%';
      progressSummary.textContent = `${done} of ${total} tasks done`;
    }

    function startEdit(id){ const t = tasks.find(x=>x.id===id); if(!t) return; const val = prompt('Edit task', t.text); if(val===null) return; const txt = val.trim(); if(txt===''){ if(confirm('Empty text ‚Äî delete task?')) removeTask(id); return; } updateTask(id,{text:txt}); }

    // events
    addBtn.addEventListener('click', ()=>{ addTask(taskInput.value); taskInput.value=''; taskInput.focus(); });
    taskInput.addEventListener('keydown',(e)=>{ if(e.key==='Enter'){ addBtn.click(); }});

    document.getElementById('filterAll').addEventListener('click',()=>setFilter('all'));
    document.getElementById('filterActive').addEventListener('click',()=>setFilter('active'));
    document.getElementById('filterDone').addEventListener('click',()=>setFilter('done'));
    document.getElementById('clearDone').addEventListener('click', clearDone);

    // initial load
    load(); render();

    // expose for debugging
    window._tasks = {get: ()=>tasks, save, load, render};
  </script>
</body>
</html>